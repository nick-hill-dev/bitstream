<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Strings Example - BitStream Demos</title>
    <script src="../bin/bitstream.js"></script>
</head>

<body>
    <script>
        window.onload = () => {
            let text = 'This is a small amount of text but it should be compressible as it contains some letters which are used more often than other letters.';
            let huffmanGraph = HuffmanCoding.createGraphFor(text);
            let huffmanTable = huffmanGraph.createLookupTable();
            let response = HuffmanCoding.encode(text, huffmanTable);
            alert(`${text}\n\nCompressed ${response.originalLength} bytes to ${response.bits.size()} bytes.`);

            let bits = new BitStream();
            bits.writeHuffmanGraph(huffmanGraph);
            bits.writeHuffmanEncoding(text, huffmanGraph);

            bits.position = 0;
            let storedGraph = bits.readHuffmanGraph();
            let storedText = bits.readHuffmanEncoding(storedGraph);
            alert(`Retrieved the text that was Huffman encoded in the bit stream:\n\n${storedText}`)
        };
    </script>
</body>

</html>